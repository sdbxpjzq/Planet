## 二级索引

使⽤记录c2列的⼤⼩进⾏记录和⻚的排序，这包括三个⽅⾯的 含义：

⻚内的记录是按照c2列的⼤⼩顺序排成⼀个单向链表。

各个存放⽤户记录的⻚也是根据⻚中记录的c2列⼤⼩顺 序排成⼀个双向链表。

存放⽬录项记录的⻚分为不同的层次，在同⼀层次中的⻚ 也是根据⻚中⽬录项记录的c2列⼤⼩顺序排成⼀个双向 链表。

B+树的叶⼦节点存储的并不是完整的⽤户记录，⽽只是c2列 +主键这两个列的值。

⽬录项记录中不再是主键+⻚号的搭配，⽽变成了c2列+主键ID+ ⻚号的 搭配。(非叶子节点是要存储主键ID吗???)

![](https://youpaiyun.zongqilive.cn/image/20200901162342.png)

![image-20190131182401127](https://youpaiyun.zongqilive.cn/image/006tNc79ly1fzpxw2qw50j312u0g645a.jpg)



## 回表查询

非主键索引需要检索两遍索引：首先检索辅助索引获得主键，然后用主键到主索引中检索获得记录。

![image-20190131185518069](https://youpaiyun.zongqilive.cn/image/006tKfTcly1g0g4yv0l6aj31v80qux0t.jpg)





辅助索引使用主键作为"指针" 而不是使用行地址值作为指针的好处是，减少了当出现行移动或者数据页分裂时辅助索引的维护工作，使用主键值当作指针会让辅助索引占用更多的空间，换来的好处是InnoDB在移动行时无须更新辅助索引中的这个"指针"，使用聚簇索引可以保证不管这个主键B+树的节点如何变化，辅助索引树都不受影响。



















