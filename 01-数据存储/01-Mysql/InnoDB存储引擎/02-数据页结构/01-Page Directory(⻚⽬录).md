1. 将所有正常的记录（包括最⼤和最⼩记录，不包括标记为已删除的记录）划分为⼏个组。

2. 每个组的最后⼀条记录（也就是组内最⼤的那条记录）的头信息中的n_owned属性表示该记录拥有多少条记录，也就是该组 内共有⼏条记录。

3. 将每个组的`最后⼀条记录的地址偏移量`单独提取出来按顺序存 储到靠近⻚的尾部的地⽅，这个地⽅就是所谓的Page Directory，也就是⻚⽬录（此时应该返回头看看⻚⾯各个部 分的图）。⻚⾯⽬录中的这些地址偏移量被称为槽（英⽂ 名：Slot），所以这个⻚⾯⽬录就是由槽组成的。



![](https://youpaiyun.zongqilive.cn/image/20200901110940.png)

对每个分组中的记录条数是有规定的：

1. 对于最⼩记录所在的分组只能有 1 条记录，
2. 最⼤记录所在的分组拥 有的记录条数只能在 1~8 条之间，剩下的分组中记录的条数范围只 能在是 4~8 条之间。



![](https://youpaiyun.zongqilive.cn/image/20200901111729.png)



以我们可以使⽤所谓的⼆分法来进⾏快速查找。 4个槽的编号分别是：0、1、2、3、4，所以初始情况下最低的槽就 是low=0，最⾼的槽就是high=4。⽐⽅说我们想找主键值为6的记 录，过程是这样的：

1. 计算中间槽的位置：(0+4)/2=2，所以查看槽2对应记录的主 键值为8，⼜因为8 > 6，所以设置high=2，low保持不变。

2. 重新计算中间槽的位置：(0+2)/2=1，所以查看槽1对应的主 键值为4，⼜因为4 < 6，所以设置low=1，high保持不变。

3. 因为high - low的值为1，所以确定主键值为5的记录在槽2 对应的组中。此刻我们需要找到槽2中主键值最⼩的那条记 录，然后沿着单向链表遍历槽2中的记录。但是我们前边⼜说 过，每个槽对应的记录都是该组中主键值最⼤的记录，这⾥槽 2对应的记录是主键值为8的记录，怎么定位⼀个组中最⼩的记 录呢？别忘了各个槽都是挨着的，我们可以很轻易的拿到槽1 对应的记录（主键值为4），该条记录的下⼀条记录就是槽2中 主键值最⼩的记录，该记录的主键值为5。所以我们可以从这 条主键值为5的记录出发，遍历槽2中的各条记录，直到找到主 键值为6的那条记录即可。由于⼀个组中包含的记录条数只能 是1~8条，所以遍历⼀个组中的记录的代价是很⼩的。



所以在⼀个数据⻚中查找指定主键值的记录的过程分为两步：

1. 通过⼆分法确定该记录所在的槽，并找到该槽中主键值最小的 那条记录。

2. 通过记录的next_record属性遍历该槽所在的组中的各个记 录。









































































