## 两种策略

- 先更新数据库，再删除缓存(`Cache Aside Pattern`设计模式)
  - 在高并发下表现优异，在原子性被破坏时表现不如意
    - 删除缓存失败了，那么会导致数据库中是新数据，缓存中是旧数据，数据就出现了不一致
- 先删除缓存，再更新数据库, (更新成功后再删除缓存一次)
  - 在高并发下表现不如意，在原子性被破坏时表现优异
  - 先删除缓存，再修改数据库。如果数据库修改失败了，那么数据库中是旧数据，缓存中是空的，那么数据不会不一致。因为读的时候缓存没有，则读数据库中旧数据，然后更新到缓存中。



## 复杂的

用阿里开源的canal通过监听数据库的binlog日志及时的去修改缓存，但是引入了新的中间件，增加 了系统的复杂度。

![](https://youpaiyun.zongqilive.cn/image/20210122104319.png)

