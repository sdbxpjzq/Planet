##### CPU密集型

- 查看本机CPU核数：`Runtime.getRuntime().availableProcessors()`
- CPU密集的意思是该任务需要大量的运算，而没有阻塞，CPU需一直全速运行。
- CPU密集任务只有在真正的多核CPU上才可能得到加速（通过多线程）
- CPU密集型任务配置尽可能少的线程数量 => **公式：`CPU核数+1个线程的线程池`**





##### IO密集型

- 由于IO密集型任务线程并不是一直在执行任务，则应配置尽可能多的线程，如CPU核数 * 2
- IO密集型，是说明该任务需要大量的IO，即大量的阻塞。所以在单线程上运行IO密集型的任务会导致浪费大量的CPU运算能力浪费在等待上，所以要使用多线程可以大大的加速程序运行，即使在单核CPU上，这种加速主要就是利用了被浪费掉的阻塞时间。
- 配置线程公式：**`CPU核数 / 1-阻塞系数（0.8~0.9）` =>如8核CPU：8 / 1 - 0.9 = 80个线程数**



一个较合理的计算公式如下：

线程数 = CPU数 * CPU利用率 * (任务等待时间 / 任务计算时间 + 1)

例如我们有个定时任务，部署在4核的服务器上，该任务有100ms在计算，900ms在I/O等待，则线程数约为：4 * 1 * (1 + 900 / 100) = 40个。



![](https://youpaiyun.zongqilive.cn/image/20210124151111.png)













