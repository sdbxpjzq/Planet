## 先行发生原则

==使用happens-before的概念来阐述操作之间的内存可见性.==

在JMM中，如果一个操作执行的结果需要对另一个操作可见，那么这2个操作之间必须要存在happens-before关系。这里提到的2个操作既可以是一个线程之内，也可以是不同线程之间。

因此 JMM 在设计时，定义了如下策略：

> 1. 对于会改变程序执行结果的重排序，JMM 要求编译器和处理器必须禁止这种重排序。
> 2. 对于不会改变程序执行结果的重排序，JMM 对编译器和处理器不做要求（JMM 允许这种重排序）





需要注意的是：
两个操作之间具有happens-before关系，并不意味着前一个操作必须要在后一个操作之前执行！
happens-before仅仅要求前一个操作（执行的结果）对后一个操作可见，且前一个操作按顺序排在第
二个操作之前。



1. join()规则: 

   



```
- 线程中断规则：对线程interrupt()方法的调用先行发生于被中断线程的代码检测到中断事件的发生
- 线程终结规则：线程中所有的操作都先行发生于线程的终止检测，我们可以通过Thread.join()方法结束、Thread.isAlive()的返回值手段检测到线程已经终止执行
- 对象终结规则：对象的构造函数执行结束, 先行发生于他的finalize()方法的开始

```



