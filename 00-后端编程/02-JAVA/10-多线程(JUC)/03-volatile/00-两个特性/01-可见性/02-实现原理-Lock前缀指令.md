## 底层实现

通过会变Lock前缀指令, 它会锁定变量缓存行区域并写会主内存, 这个操作称为"缓存锁定", 

缓存一致性机制会阻止同时修改被两个以上处理器缓存的内存区域数据, 一个处理器的缓存回写到内存, 会导致其他处理器的缓存无效



如果对声明了Volatile变量进行写操作，JVM就会向处理器发送一条Lock前缀的指令，将这个变量所在缓存行的数据写回到系统内存。

每个处理器通过嗅探在总线上传播的数据来检查自己缓存的值是不是过期了，当处理器发现自己缓存行对应的内存地址被修改，就会将当前处理器的缓存行设置成无效状态，当处理器要对这个数据进行修改操作的时候，会强制重新从系统内存里把数据读到处理器缓存里。