## SYN攻击的防范



这里给出几种防御 SYN 攻击的方法：

- 增大半连接队列；

- 开启 tcp_syncookies 功能

- 减少 SYN+ACK 重传次数

  当服务端受到 SYN 攻击时，就会有大量处于 SYN_REVC 状态的 TCP 连接，处于这个状态的 TCP 会重传 SYN+ACK ，当重传超过次数达到上限后，就会断开连接。



### 首包丢弃

可通过丢弃客户端的第一个SYN报文来达到防御的目的，这就是“首包丢弃”了。但如果丢弃了SYN报文，客户端与服务器之间又如何进行连接呢？

TCP是一种可靠的协议，为了确保所有的数据包都能到达服务器，设计了一个重传机制。真实的客户端访问，在一定的时间内如果没有收到服务器的回复，将会再次发送SYN报文，但攻击机制通常不会再重发。所以丢弃首次SYN报文后，就相当于过滤掉了虚假的客户端访问，进而防御了伪造源IP进行的SYN Flood攻击，保障了服务器的正常运行。